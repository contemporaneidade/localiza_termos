<?phprequire "common/functions/retirarAcento.php";if ($argc != 2)	die("\n Uso correto: php executar.php [nome do arquivo de termos] \n");$tmp_arr = explode('.', strtoupper($argv[1]));if ($tmp_arr[sizeof($tmp_arr)-1] != "TXT")	die("\n A extensao do arquivo fornecido nao foi reconhecida. \n");echo "\n Processo inciado: ".date("d-m-Y H:i:s")."\n";	// Carregando os temos$handle = @fopen($argv[1], "r");if ($handle) {	while (($data = fgetcsv($handle, 1000, ";")) !== FALSE)		$arr_termos = $data;}$arr_ocorr = false;// Lendo os arquivosif ($handle2 = opendir('arquivos/')) {	while (false !== ($entry = readdir($handle2))) {		$tmp_arr2 = explode('.', strtoupper($entry));		if ($tmp_arr2[sizeof($tmp_arr2)-1] == "RTF") {			$handle3 = fopen('arquivos/'.$entry, "r");			if ($handle3) {				echo "\n Arquivo : arquivos/".$entry."\n";								while (!feof($handle3)) {					$buffer = fgets($handle3, 4096);					foreach ($arr_termos as $termo) {						$termo = trim($termo);						if (preg_match('/'.strtoupper(retirarAcento($termo)).'/', strtoupper(convert_chars($buffer)))) {							if (!isset($arr_ocorr[$entry][$termo]))								$arr_ocorr[$entry][$termo] = 1;							else								$arr_ocorr[$entry][$termo]++;						}					}				}			}		}	}}if (sizeof($arr_ocorr) > 0) {	$saida = "saida_".date("Ymd_His").".txt";		$handle4 = @fopen($saida, "a+");	while(list($k, $v) = each($arr_ocorr)) {		fwrite($handle4, $k."\r\n");		while(list($x, $z) = each($v)) {			fwrite($handle4, ' - '.$x.': '.$z."\r\n");		}		fwrite($handle4, "\r\n");	}	fclose($handle4);}?>